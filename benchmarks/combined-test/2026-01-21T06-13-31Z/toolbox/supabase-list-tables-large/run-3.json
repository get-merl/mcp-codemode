{
  "taskId": "supabase-list-tables-large",
  "mode": "toolbox",
  "runNumber": 3,
  "timestamp": "2026-01-21T06:15:20.438Z",
  "tokens": {
    "input": 77,
    "output": 586,
    "total": 663
  },
  "cost": 0.009021000000000001,
  "response": {
    "tool_name": "sql_query",
    "arguments": {
      "query": "SELECT n.nspname AS schema_name,\n       c.relname AS table_name,\n       obj_description(c.oid,'pg_class') AS table_comment,\n       pg_size_pretty(pg_total_relation_size(c.oid)) AS total_size,\n       pg_size_pretty(pg_relation_size(c.oid)) AS heap_size,\n       pg_size_pretty(pg_total_relation_size(c.oid) - pg_relation_size(c.oid)) AS index_toast_size,\n       COALESCE(s.n_live_tup, 0) AS est_live_rows,\n       COALESCE(s.n_dead_tup, 0) AS est_dead_rows,\n       COALESCE(s.last_vacuum, s.last_autovacuum) AS last_vacuum,\n       COALESCE(s.last_analyze, s.last_autoanalyze) AS last_analyze\nFROM pg_class c\nJOIN pg_namespace n ON n.oid = c.relnamespace\nLEFT JOIN pg_stat_user_tables s ON s.relid = c.oid\nWHERE n.nspname = 'public'\n  AND c.relkind = 'r'\nORDER BY c.relname;\n\n-- Column details for each table\nSELECT table_schema,\n       table_name,\n       ordinal_position,\n       column_name,\n       data_type,\n       udt_name,\n       is_nullable,\n       column_default,\n       character_maximum_length,\n       numeric_precision,\n       numeric_scale,\n       datetime_precision\nFROM information_schema.columns\nWHERE table_schema = 'public'\nORDER BY table_name, ordinal_position;\n\n-- Constraints (PK/UNIQUE/FK/CHECK)\nSELECT tc.table_schema,\n       tc.table_name,\n       tc.constraint_name,\n       tc.constraint_type,\n       kcu.column_name,\n       ccu.table_schema AS foreign_table_schema,\n       ccu.table_name   AS foreign_table_name,\n       ccu.column_name  AS foreign_column_name\nFROM information_schema.table_constraints tc\nLEFT JOIN information_schema.key_column_usage kcu\n  ON tc.constraint_name = kcu.constraint_name\n AND tc.table_schema = kcu.table_schema\nLEFT JOIN information_schema.constraint_column_usage ccu\n  ON tc.constraint_name = ccu.constraint_name\n AND tc.table_schema = ccu.table_schema\nWHERE tc.table_schema = 'public'\nORDER BY tc.table_name, tc.constraint_type, tc.constraint_name, kcu.ordinal_position;\n\n-- Indexes\nSELECT schemaname AS schema_name,\n       tablename  AS table_name,\n       indexname  AS index_name,\n       indexdef   AS index_definition\nFROM pg_indexes\nWHERE schemaname = 'public'\nORDER BY tablename, indexname;"
    }
  },
  "correct": false
}